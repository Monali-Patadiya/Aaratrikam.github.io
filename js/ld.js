window.Criteo=window.Criteo||{},window.Criteo.oneTagConfig={partnerId:49593,visitEventEnabled:!0,fpIdentifier:void 0,waitForGum:!0,dynamic:!0,gumDomain:"gum.criteo.com",privateModeDetectionEnabled:!0},function(){"use strict";function e(e,t){var n,o,i=null===(n=window.Criteo)||void 0===n?void 0:n.oneTagConfig;return null!==(o=i&&i[e])&&void 0!==o?o:t}var t,n,o="5.18.0";(n=t=t||{})[n.None=0]="None",n[n.Cookie=1]="Cookie",n[n.LocalStorage=2]="LocalStorage";var i=(r.checkLocalStorageIsWritable=function(){try{if(!window.localStorage)return!1;var e="criteo_localstorage_check";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}},r.checkCookiesAreWritable=function(){var e=new r("criteo_write_test",1e4);e.setValueWithNoDomain("1");var t="1"===e.cookieValue;return e.removeWithNoDomain(),t},r.prototype.setCookieRead=function(){this.isCookieRead=!0},r.prototype.setValue=function(e,t){void 0===t&&(t=!0),this.cookieValue=e,this.isCookieValueExternallySet=!0,t&&this.writeOnAllStorages(e)},r.prototype.setValueFromExistingCookie=function(){var e=this.getValue();void 0!==e&&(this.cookieValue=e,this.cookieOrigin|=t.Cookie)},r.prototype.setValueFromAllStorages=function(){var e=this.getFromAllStorages();this.cookieValue=e.value,this.cookieOrigin=e.origin},r.prototype.getValue=function(){for(var e=0,t=document.cookie.split(";");e<t.length;e++){var n=t[e];if(n.substr(0,n.indexOf("=")).replace(/^\s+|\s+$/g,"")===this.cookieName){var o=n.substr(n.indexOf("=")+1);return(decodeURIComponent||unescape)(o)}}},r.prototype.removeWithNoDomain=function(){this.setValueWithNoDomainWithExpiration("",0)},r.prototype.removeOnMainDomain=function(){this.setOnMainDomainWithExpiration("",0)},r.prototype.setOnMainDomain=function(e){return this.setOnMainDomainWithExpiration(e,this.cookieRetentionTimeInMs)},r.prototype.writeOnAllStorages=function(e){this.setOnMainDomain(e),this.useLocalStorage&&window.localStorage.setItem(this.cookieName,e)},r.prototype.getFromAllStorages=function(){switch(this.cookieOrigin){case t.LocalStorage:return{value:window.localStorage.getItem(this.cookieName),origin:t.LocalStorage};case t.Cookie:return{value:this.getValue(),origin:t.Cookie};case t.None:var e=null;this.useLocalStorage&&(e=window.localStorage.getItem(this.cookieName));var n=this.getValue()||null;return{value:n||e,origin:this.computeStorageOrigin(n,e)}}},r.prototype.removeFromAllStorages=function(){this.removeOnMainDomain(),this.useLocalStorage&&window.localStorage.removeItem(this.cookieName)},r.prototype.setValueWithNoDomainWithExpiration=function(e,t){var n=new Date;n.setTime(n.getTime()+t);var o="expires="+n.toUTCString(),i=encodeURIComponent||escape;document.cookie=this.cookieName+"="+i(e)+";"+o+";path=/";var r=this.getValue();void 0!==r&&(this.cookieValue=r)},r.prototype.setValueWithNoDomain=function(e){this.setValueWithNoDomainWithExpiration(e,this.cookieRetentionTimeInMs)},r.prototype.toFragmentData=function(){return{origin:this.cookieOrigin,value:this.cookieValue}},r.prototype.setOnMainDomainWithExpiration=function(e,t){var n=new Date;n.setTime(n.getTime()+t);for(var o="expires="+n.toUTCString(),i=null===document.location?[]:document.location.hostname.split("."),r=null,a=0;a<i.length;++a){var c="domain=."+(r=i.slice(i.length-a-1,i.length).join(".")),s=encodeURIComponent||escape;document.cookie=this.cookieName+"="+s(e)+";"+o+";"+c+";path=/";var u=this.getValue();if(u&&u===e)break}return r||document.location},r.prototype.computeStorageOrigin=function(e,n){var o=t.None;return e&&(o|=t.Cookie),n&&(o|=t.LocalStorage),o},r.prototype.getMatchingKeyInAllStorage=function(e){if(!(e instanceof RegExp))return e;if("undefined"!=typeof localStorage)for(var t=0,n=Object.keys(localStorage);t<n.length;t++){var o=n[t];if(e.test(o))return o}for(var i=0,r=document.cookie.split(";");i<r.length;i++){var a=r[i];if(e.test(a))return a}return""},r);function r(e,n,o){void 0===o&&(o=t.None),this.cookieValue=null,this.isCookieValueExternallySet=!1,this.isCookieRead=!1,this.cookieName=this.getMatchingKeyInAllStorage(e),this.cookieRetentionTimeInMs=n,this.cookieOrigin=o,this.useLocalStorage=r.checkLocalStorageIsWritable()}var a=(c.prototype.getReadyToRetrieveProvider=function(){return this.tcfv2ConsentProvider.hasCallerFunctionInFrame()?this.tcfv2ConsentProvider:this.tcfv1ConsentProvider.hasCallerFunctionInFrame()?this.tcfv1ConsentProvider:void 0!==this.tcfv2ConsentProvider.getCMPFrame()?this.tcfv2ConsentProvider:void 0!==this.tcfv1ConsentProvider.getCMPFrame()?this.tcfv1ConsentProvider:void 0},c.prototype.retrieveConsentForPassback=function(e){var t=this.getReadyToRetrieveProvider();void 0===t&&(this.logger("No compatible GDPR privacy provider found"),e(void 0)),t===this.tcfv1ConsentProvider?this.tcfv1ConsentProvider.retrieveConsentForPassback(e):t===this.tcfv2ConsentProvider&&this.tcfv2ConsentProvider.retrieveConsent(e)},c.prototype.retrieveConsent=function(e){var t=this.getReadyToRetrieveProvider();void 0===t&&(this.logger("No compatible GDPR privacy provider found"),e(void 0)),null==t||t.retrieveConsent(e)},c.prototype.readyToRetrieve=function(){return this.tcfv2ConsentProvider.readyToRetrieve()||this.tcfv1ConsentProvider.readyToRetrieve()},c);function c(e,t,n){void 0===n&&(n=function(e){}),this.tcfv1ConsentProvider=e,this.tcfv2ConsentProvider=t,this.logger=n}function s(e){try{return JSON.parse(e)}catch(e){return}}var u,l,d=(p.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__cmpLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},p.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__cmp},p.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},p.prototype.pingWithTimeout=function(e,t,n,o){function i(e,t){r.logger(t),clearTimeout(e),o()}var r=this;return window.setTimeout((function(){var n=window.setTimeout((function(){i(e,"Timeout: Unable to get ping return after "+t+"ms")}),t);r.executeCommand("ping",null,(function(t,o){clearTimeout(n),o?(r.logger("GDPR CMP ping returned"),!0!==t.cmpLoaded&&i(e,"GDPR ping returned cmpLoaded which is not true"),r.logger("GDPR ping returned cmpLoaded which is true")):i(e,"Error sending ping to GDPR CMP")}))}),n)},p.prototype.retrieveConsent=function(e){this.executeRetrieveConsent("getConsentData",null,e)},p.prototype.retrieveConsentForPassback=function(e){this.executeRetrieveConsent("getVendorConsents",[91],e)},p.prototype.executeRetrieveConsent=function(e,t,n){var o=this,i=!1,r=window.setTimeout((function(){i=!0,o.logger("Timeout: Unable to resolve GDPR consent after "+o.timeout+"ms"),n(void 0)}),this.timeout),a=!1!==this.cmpAutoDetect?this.pingWithTimeout(r,this.pingTimeout,this.pingDelay,(function(){i=!0,o.logger("Timeout: Unable to ping GDPR API after "+o.pingTimeout+"ms"),n(void 0)})):void 0;this.executeCommand(e,t,(function(e,t){clearTimeout(a),i||(clearTimeout(r),t?(o.logger("GDPR consent retrieved"),o.processConsentData(e,n)):(o.logger("Error retrieving GDPR consent data from CMP"),n(void 0)))}))},p.prototype.processConsentData=function(e,t){if(e){var n={};void 0!==e.consentData&&(n.consentData=e.consentData),void 0!==e.gdprApplies&&(n.gdprApplies=!!e.gdprApplies),t(n)}else this.logger("Unable to read GDPR consent data from CMP"),t(void 0)},p.prototype.executeCommand=function(e,t,n){var o=this;if(!this.hasCallerFunctionInFrame()){this.logger("No GDPR CMP defined on current frame");var i=this.getCMPFrame();this.currentWindow.__cmp=function(e,t,n){if(!i)return o.logger("GDPR CMP not found in any frame"),void n({msg:"GDPR CMP not found in any frame"},!1);var r=Math.random().toString(10),a={__cmpCall:{command:e,parameter:t,callId:r}};o.cmpCallbacks[r]=n,i.postMessage(a,"*")},this.currentWindow.addEventListener("message",(function(e){var t="string"==typeof e.data?s(e.data):e.data;if(t&&t.__cmpReturn&&t.__cmpReturn.callId&&t.__cmpReturn.returnValue){var n=t.__cmpReturn;o.cmpCallbacks&&o.cmpCallbacks[n.callId]&&(o.cmpCallbacks[n.callId](n.returnValue,n.success),delete o.cmpCallbacks[n.callId])}}),!1)}this.currentWindow.__cmp(e,t,n)},p);function p(e,t,n){void 0===n&&(n=function(e){}),this.cmpCallbacks={},this.currentWindow=e,this.timeout=t.tcfTimeout,this.pingTimeout=t.tcfPingTimeout,this.pingDelay=t.tcfPingDelay,this.cmpAutoDetect=t.cmpAutoDetect,this.logger=n}(l=u=u||{}).LOADED="tcloaded",l.UI_SHOWN="cmpuishown",l.USER_ACTION_COMPLETE="useractioncomplete";var f=(h.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__tcfapiLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},h.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__tcfapi},h.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},h.prototype.pingWithTimeout=function(e,t,n,o){function i(e,t){r.logger(t),clearTimeout(e),o()}var r=this;return window.setTimeout((function(){var n=window.setTimeout((function(){i(e,"Timeout: Unable to get TCFv2 ping return after "+t+"ms")}),t);r.executeCommand("ping",2,(function(t){clearTimeout(n),r.logger("TCFv2 CMP ping returned in ms"),"error"===t.cmpStatus?i(e,"Error status on ping to TCFv2 CMP"):!0!==t.cmpLoaded?i(e,"TCFv2 ping returned cmpLoaded = false"):r.logger("TCFv2 ping returned cmpLoaded = true")}))}),n)},h.prototype.retrieveConsent=function(e){var t,n,o=this,i=!1,r=window.setTimeout((function(){i=!0,n===u.UI_SHOWN?(o.logger("Timeout: User hasn't confirm their consent settings after "+o.timeout+"ms"),e(t)):(o.logger("Timeout: Unable to resolve TCFv2 consent after "+o.timeout+"ms"),e(void 0))}),this.timeout),a=!1!==this.cmpAutoDetect?this.pingWithTimeout(r,this.pingTimeout,this.pingDelay,(function(){i=!0,o.logger("Timeout: Unable to ping TCFv2 API after "+o.pingTimeout+"ms"),e(void 0)})):void 0;this.executeCommand("addEventListener",2,(function(c,s){clearTimeout(a),i||((n=c.eventStatus)!==u.UI_SHOWN&&clearTimeout(r),s?(o.logger("TCFv2 consent retrieved in ms"),c||(o.logger("Unable to read GDPR consent data from CMP"),e(void 0)),t=o.processResponseData(c),n!==u.LOADED&&n!==u.USER_ACTION_COMPLETE||e(t)):(o.logger("Error retrieving TCFv2 consent data from CMP"),e(void 0)))}))},h.prototype.processResponseData=function(e){var t,n,o={};return void 0!==e.tcString&&(o.consentData=e.tcString),void 0!==e.gdprApplies&&(o.gdprApplies=!!e.gdprApplies),o.version=e.tcfPolicyVersion?e.tcfPolicyVersion:2,o.purposes=null===(t=null==e?void 0:e.purpose)||void 0===t?void 0:t.consents,o.vendorConsents=null===(n=null==e?void 0:e.vendor)||void 0===n?void 0:n.consents,o},h.prototype.executeCommand=function(e,t,n,o){var i=this;if(!this.hasCallerFunctionInFrame()){this.logger("No TCFv2 CMP defined on current frame");var r=this.getCMPFrame();this.currentWindow.__tcfapi=function(e,t,n,o){if(!r)return i.logger("TCFv2 CMP not found in any frame"),void n({msg:"TCFv2 CMP not found in any frame"},!1);var a=Math.random().toString(10),c={__tcfapiCall:{command:e,version:t,parameter:o,callId:a}};i.cmpCallbacks[a]=n,r.postMessage(c,"*")},this.currentWindow.addEventListener("message",(function(e){var t="string"==typeof e.data?s(e.data):e.data;if(t&&t.__tcfapiReturn&&t.__tcfapiReturn.callId&&t.__tcfapiReturn.returnValue){var n=t.__tcfapiReturn;i.cmpCallbacks&&i.cmpCallbacks[n.callId]&&"function"==typeof i.cmpCallbacks[n.callId]&&(i.cmpCallbacks[n.callId](n.returnValue,n.success),n.returnValue.eventStatus!==u.UI_SHOWN&&delete i.cmpCallbacks[n.callId])}}),!1)}this.currentWindow.__tcfapi(e,t,n,o)},h);function h(e,t,n){void 0===n&&(n=function(e){}),this.cmpCallbacks={},this.currentWindow=e,this.timeout=t.tcfTimeout,this.pingTimeout=t.tcfPingTimeout,this.pingDelay=t.tcfPingDelay,this.cmpAutoDetect=t.cmpAutoDetect,this.logger=n}var g=(m.prototype.getCMPFrame=function(){for(var e,t=this.currentWindow,n=0;n<10;++n){try{t.frames.__uspapiLocator&&(e=t)}catch(e){}if(t===this.currentWindow.top)break;t=t.parent}return e},m.prototype.hasCallerFunctionInWindow=function(){return"function"==typeof this.currentWindow.__uspapi},m.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInWindow()||void 0!==this.getCMPFrame()},m.prototype.retrieveConsent=function(e){var t=this,n=!1,o=window.setTimeout((function(){n=!0,t.logger("Timeout: Unable to resolve CCPA consent after "+t.timeout+"ms"),e(void 0)}),this.timeout);this.executeCommand("getUSPData",1,(function(i,r){n||(clearTimeout(o),r?(t.logger("CCPA consent retrieved"),t.processResponseData(i,e)):(t.logger("Error retrieving CCPA consent data from CMP"),e(void 0)))}))},m.prototype.processResponseData=function(e,t){e?t(e):(this.logger("Unable to read CCPA consent data from CMP"),t(void 0))},m.prototype.executeCommand=function(e,t,n){var o=this;if(!this.hasCallerFunctionInWindow()){this.logger("No CCPA CMP defined on current frame");var i=this.getCMPFrame();this.currentWindow.__uspapi=function(e,t,n){if(!i)return o.logger("CCPA CMP not found in any frame"),void n({msg:"CCPA CMP not found in any frame"},!1);var r=Math.random().toString(10),a={__uspapiCall:{command:e,parameter:t,callId:r}};o.uspapiCallbacks[r]=n,i.postMessage(a,"*")},this.currentWindow.addEventListener("message",(function(e){var t="string"==typeof e.data?s(e.data):e.data;if(t&&t.__uspapiReturn&&t.__uspapiReturn.callId&&t.__uspapiReturn.returnValue){var n=t.__uspapiReturn;o.uspapiCallbacks&&o.uspapiCallbacks[n.callId]&&(o.uspapiCallbacks[n.callId](n.returnValue,n.success),delete o.uspapiCallbacks[n.callId])}}),!1)}this.currentWindow.__uspapi(e,t,n)},m.prototype.hasUserOptOut=function(e){return!(!e||!e.uspString||"1YNY"===e.uspString.toUpperCase()||"1YNN"===e.uspString.toUpperCase()||"1YN-"===e.uspString.toUpperCase()||"1-N-"===e.uspString.toUpperCase()||"1---"===e.uspString)},m);function m(e,t,n){void 0===n&&(n=function(e){}),this.uspapiCallbacks={},this.currentWindow=e,this.timeout=t.uspApiTimeout,this.logger=n}var v,y,C="OneTag",w=["color: #fff;","background: #ff4f00;","display: inline-block;","padding: 1px 4px;","border-radius: 3px;"].join(" ");(y=v=v||{})[y.Off=0]="Off",y[y.Error=1]="Error",y[y.Warning=2]="Warning",y[y.Info=3]="Info",y[y.Debug=4]="Debug";var b=(k.setLogLevel=function(e){k.level=e,this.debug("Log level set to "+v[e])},k.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];k.log(console.log,v.Debug,e)},k.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];k.log(console.log,v.Info,e)},k.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];k.log(console.warn,v.Warning,e)},k.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];k.log(console.error,v.Error,e)},k.log=function(e,t,n){if(t<=k.level){var o=window.navigator.userAgent,i=0<o.indexOf("MSIE ")||0<o.indexOf("Trident/")?["["+C+"]"]:["%c"+C,w];e.apply(console,i.concat(n))}},k.level=v.Warning,k);function k(){}var P=(T.prototype.retrieveConsent=function(e){var t=this.tcfCompatibleConsentProvider.readyToRetrieve(),n=this.ccpaConsentProvider.readyToRetrieve(),o={};if(t||n){var i=t&&n?2:1;t&&this.tcfCompatibleConsentProvider.retrieveConsent((function(t){o.gdprConsent=t,0==--i&&e(o)})),n&&this.ccpaConsentProvider.retrieveConsent((function(t){o.ccpaConsent=t,0==--i&&e(o)}))}else e(o)},T);function T(e,t,n,o){void 0===t&&(t=1e4),void 0===n&&(n=50),void 0===o&&(o=1e3);var i={tcfTimeout:t,tcfPingTimeout:n,tcfPingDelay:o},r={uspApiTimeout:t};this.tcfCompatibleConsentProvider=new a(new d(e,i,b.info),new f(e,i,b.info),b.info),this.ccpaConsentProvider=new g(e,r,b.info)}var S=(I.prototype.catchAndStoreException=function(e,t){try{return void 0===t?e():e.apply(this,t)}catch(e){e instanceof Error?this.exceptions.push(e):this.exceptions.push(new Error(e))}},I.prototype.setProtectedTimeout=function(e,t){var n=this;if("undefined"!=typeof window&&"function"==typeof window.setTimeout)return window.setTimeout((function(){return n.catchAndStoreException(e)}),t)},I.prototype.addProtectedEventListener=function(e,t,n,o){var i=this;if(void 0!==e&&"function"==typeof e.addEventListener)return e.addEventListener(t,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.catchAndStoreException(n,e)}),o)},I.prototype.attachProtectedEvent=function(e,t,n){var o=this;if(void 0!==e&&"function"==typeof e.attachEvent)return e.attachEvent(t,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.catchAndStoreException(n,e)}))},I);function I(){this.exceptions=[]}function _(e,t){if(e instanceof Array)for(var n=0,o=e;n<o.length;n++)_(o[n],t);else R(t,e)||t.push(e)}function R(e,t){for(var n=JSON.stringify||encodeURIComponent||escape,o=n(t),i=0,r=e;i<r.length;i++){var a=r[i];if(a===t||n(a)===o)return!0}return!1}function D(e,t){var n=[];if(void 0===e)return void 0===t?n:t.slice();if(void 0===t)return e.slice();for(var o=0,i=t;o<i.length;o++){var r=i[o];R(e,r)||n.push(r)}return e.concat(n)}function A(e){for(var t=[],n=0,o=e;n<o.length;n++){var i=o[n];null!=i&&t.push(i)}return t}function E(e,t){if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t)return!1;if(!(e instanceof Array))return E([e],t);if(!(t instanceof Array))return E(e,[t]);if(e.length!==t.length)return!1;for(var n=0,o=e;n<o.length;n++)if(!R(t,o[n]))return!1;return!0}var F=(O.extractHostname=function(e){var t=document.createElement("a");return t.href=e,t.hostname},O.getAnchorWithReferrer=function(e){if(e&&e.referrer){var t=e.createElement("a");return t.href=e.referrer,t}return null},O.getQueryString=function(e){var t;try{t=e.top.location.search}catch(i){var n=e;try{for(;n.parent.document!==n.document&&n.parent.document;)n=n.parent}catch(e){}if(n){var o=O.getAnchorWithReferrer(n.document);o&&(t=o.search)}}return t},O.getHighestAccessibleUrl=function(e){var t,n=O.getHighestAccessibleWindow(e),o=n.topFrame;if(n.err)try{try{t=o.top.location.href}catch(e){var i=o.location.ancestorOrigins;t=i[i.length-1]}}catch(e){t=o.document.referrer}else t=o.location.href;return t},O.getPreviousUrl=function(e){var t,n,o=O.getHighestAccessibleWindow(e),i=o.topFrame,r="";if(o.err||(r=i.document.referrer||(null===(t=i.top)||void 0===t?void 0:t.document.referrer)||""),!r){var a=null===(n=i.location)||void 0===n?void 0:n.ancestorOrigins;a&&0<a.length&&(r=a[a.length-1])}return r},O.onBodyReady=function(e,t){!function n(){document.body?e.setProtectedTimeout(t,0):e.setProtectedTimeout(n,10)}()},O.onDocumentReady=function(e,t){if("complete"===document.readyState)t();else if(document.addEventListener)e.addProtectedEventListener(document,"DOMContentLoaded",t,!1),e.addProtectedEventListener(window,"load",t,!1);else{e.attachProtectedEvent(document,"onreadystatechange",t),e.attachProtectedEvent(window,"onload",t);var n=!1;try{n=null===window.frameElement&&document.documentElement}catch(n){}if(n&&n.doScroll)!function o(){if(n){try{n.doScroll("left")}catch(t){return void e.setProtectedTimeout(o,50)}t()}}();else{var o=!1,i=null===document.onload?null:function(e,t){return e.onload(t)},r=null===document.onreadystatechange?null:function(e,t){return e.onreadystatechange(t)};document.onload=document.onreadystatechange=function(e){r instanceof Function&&r(document,e),o||document.readyState&&"complete"!==document.readyState||(i instanceof Function&&i(document,e),o=!0,t())}}}},O.removeLater=function(e,t){e.setProtectedTimeout((function(){null!==t&&null!==t.parentElement&&t.parentElement.removeChild(t)}),3e4)},O.appendCriteoContainer=function(e){if(!e)return null;var t=document.createElement("div");return t.setAttribute("id","criteo-tags-div"),t.style.display="none",e.appendChild(t),t},O.getHighestAccessibleWindow=function(e){var t=e,n=!1;try{for(;t.parent.document!==t.document;){if(!t.parent.document){n=!0;break}t=t.parent}}catch(e){n=!0}return{topFrame:t,err:n}},O);function O(){}function M(e){var t=e;if(e instanceof Function)return(t=e())instanceof Function?t:M(t);if(e instanceof Array){t=[];for(var n=0;n<e.length;++n)t[n]=M(e[n])}else if(e&&"[object Object]"===e.toString()){t={};for(var o=0,i=Object.getOwnPropertyNames(e);o<i.length;o++){var r=i[o];t[r]=M(e[r])}}return t}function x(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&E(t.account,i.account)){for(var r in t)t.hasOwnProperty(r)&&"account"!==r&&(i[r]=t[r]);return}}e.push(t)}function N(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&E(t.account,i.account)&&i.hash_method===t.hash_method)return void(void 0!==t.email&&(i.email=D(i.email instanceof Array||void 0===i.email?i.email:[i.email],t.email instanceof Array?t.email:[t.email])))}e.push(t)}function W(e,t,n){var o=M(n);return L(e,o),x(t,M(o)),1}function L(e,t){for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.event===t.event&&void 0===t.account&&void 0===i.account||E(t.account,i.account)){for(var r in t)t.hasOwnProperty(r)&&"account"!==r&&(i[r]=t[r]);return}}e.push(t)}function U(e){if(void 0!==e.identity&&JSON.stringify){var t=e.identity instanceof Array?e.identity:[e.identity];e.raw_identity=JSON.stringify(t),delete e.identity}}var V=(B.prototype.fillQueryStringParams=function(e,t){var n=this.config.trackingCallData.firstPartyIdentifier;n&&e.push("fpid="+n),this.gaid&&e.push("ai="+this.gaid),this.idfa&&e.push("idfa="+this.idfa),this.canWriteCookie&&e.push("adce=1"),null!==this.clickOriginPayload&&e.push("cop="+this.clickOriginPayload),null!==this.optoutCookie.cookieValue&&e.push("optout=1"),null!=this.bundleCookie.cookieValue&&e.push("bundle="+this.bundleCookie.cookieValue),null!==this.secureIdCookie.cookieValue&&(e.push("sid="+this.secureIdCookie.cookieValue),e.push("sid_read="+(this.secureIdCookie.isCookieValueExternallySet?"1":"0"))),null!==this.tld&&e.push("tld="+this.tld),t.privateModeDetectionEnabled&&null!==this.privateMode&&0!==this.privateMode?e.push("pm="+this.privateMode):t.privateModeDetectionEnabled||e.push("pm=3"),void 0!==new i("cto_clc",this.readonlyCookieRetentionTime).getValue()&&e.push("clc=1")},B.prototype.checkAcid=function(){this.setCanWriteCookie(),this.setCanWriteLocalStorage()},B.prototype.setCop=function(e){var t=F.getQueryString(e);if(void 0!==t&&(this.clickOriginPayload=this.getParameterValueByName(t,"cto_pld")),null===this.clickOriginPayload)try{var n=F.getAnchorWithReferrer(e.top.document);n&&n.search&&(this.clickOriginPayload=this.getParameterValueByName(n.search,"cto_pld"))}catch(e){}},B.prototype.checkClientSideIdentityStatus=function(){this.optoutCookie.getFromAllStorages(),this.secureIdCookie.setValueFromAllStorages(),this.bundleCookie.setValueFromAllStorages(),this.ifaCookie.setValueFromAllStorages()},B.prototype.checkCookies=function(e){var t=!0;if(e.callbacks){for(var n=0,o="string"==typeof e.callbacks?[e.callbacks]:e.callbacks;n<o.length;n++){var i=o[n],r=document.createElement("img");r.setAttribute("style","display:none;"),r.setAttribute("width","1"),r.setAttribute("height","1"),r.setAttribute("data-owner","criteo-tag"),r.setAttribute("src",i);var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a),F.removeLater(this.exceptionHandler,r)}t=!1}e.optout?(this.optoutCookie.setValue("1",t),this.secureIdCookie.removeFromAllStorages(),this.bundleCookie.removeFromAllStorages()):(e.bundle&&this.bundleCookie.setValue(e.bundle,t),e.removeSid?this.secureIdCookie.removeFromAllStorages():e.sid&&this.secureIdCookie.setValue(e.sid,t))},B.prototype.getParameterValueByName=function(e,t){if(e&&1<e.length){"?"===e[0]&&(e="&"+e.substr(1));var n="&"+t+"=",o=e.indexOf(n);if(-1!==o){var i=e.indexOf("&",o+n.length);return e.slice(o+n.length,i<0?void 0:i)}}return null},B.prototype.setCanWriteCookie=function(){this.canWriteCookie=i.checkCookiesAreWritable()},B.prototype.setCanWriteLocalStorage=function(){this.canWriteLocalStorage=i.checkLocalStorageIsWritable()},B.prototype.getTld=function(){var e=new i("cto_tld_test",36e5),t=e.setOnMainDomain("woot");return e.removeOnMainDomain(),t},B.prototype.getPrivateMode=function(e,t){if(e.isSafari)try{if("function"==typeof t.openDatabase)return t.openDatabase(null,null,null,null),1}catch(e){return 2}return 0},B);function B(e,t,n,o){this.readonlyCookieRetentionTime=0,this.optoutCookieRetentionTime=15768e7,this.identificationCookieRetentionTime=34164e6,this.optoutCookie=new i("cto_optout",this.optoutCookieRetentionTime),this.secureIdCookie=new i("cto_sid",this.identificationCookieRetentionTime),this.bundleCookie=new i("cto_bundle",this.identificationCookieRetentionTime),this.ifaCookie=new i("id_controller_ifa",this.identificationCookieRetentionTime),this.canWriteCookie=!1,this.canWriteLocalStorage=!1,this.clickOriginPayload=null,this.tld=this.getTld(),this.privateMode=this.getPrivateMode(t,n),this.exceptionHandler=e,this.config=o}var G=(j.prototype.createIframe=function(e,t,n,o,i){var r=document.createElement("iframe"),a=encodeURIComponent||escape,c=F.getHighestAccessibleUrl(window),s=a(F.extractHostname(c)),u=window.SYNCFRAME_ORIGIN||"onetag",l={bundle:e.bundleCookie.toFragmentData(),cw:e.canWriteCookie,optout:e.optoutCookie.toFragmentData(),origin:u,sid:e.secureIdCookie.toFragmentData(),tld:e.tld,topUrl:s,version:t.replace(/\./g,"_"),ifa:e.ifaCookie.toFragmentData(),lsw:e.canWriteLocalStorage,pm:o?e.privateMode:3},d=this.gumSyncFrameEndPoint;"#gum-debug-mode"===window.location.hash?d+="?debug=1&topUrl="+s:d+="?topUrl="+s,u&&(d+="&origin="+u);var p=i.gdprConsent;p&&(void 0!==p.gdprApplies&&(d+="&gdpr="+(p.gdprApplies?1:0)),void 0!==p.consentData&&(d+="&gdpr_consent="+p.consentData));var f=i.ccpaConsent;return f&&void 0!==f.uspString&&(d+="&us_privacy="+f.uspString),d+="#"+JSON.stringify(l),r.src=d,r.id=this.gumSyncFrameId,r.width="0",r.height="0",r.frameBorder="0",r.setAttribute("style","border-width:0px; margin:0px; display:none"),r.title="Criteo GUM iframe",F.removeLater(n,r),r},j.prototype.setWaitingFlag=function(e){this.waitingForSyncframe=this.waitingForSyncframe&&null===e.bundleCookie.cookieValue&&null===e.optoutCookie.cookieValue},j.prototype.shouldInjectSyncframe=function(){return void 0!==window.addEventListener||this.forceSyncFrame},j);function j(t){this.forceSyncFrame=!1,this.gumSyncFrameOrigin="https://"+e("gumDomain","gum.criteo.com"),this.gumSyncFrameEndPoint=window.CriteoSyncFrameUrlOverride||this.gumSyncFrameOrigin+"/syncframe",this.gumSyncFrameId="criteo-syncframe-onetag",this.waitingForSyncframe=t.hasItp||e("waitForGum",!0)}var q=new RegExp(/^Mozilla\/5\.0 \([^)]+\) AppleWebKit\/[^ ]+ \(KHTML, like Gecko\) Version\/([^ ]+)( Mobile\/[^ ]+)? Safari\/[^ ]+$/i),H=(J.prototype.canRetrieveMetrics=function(){return this.hasPerformanceApi},J.prototype.startRecordingInit=function(){this.canRetrieveMetrics()&&(this.beginInit=performance.now())},J.prototype.stopRecordingInit=function(){if(this.canRetrieveMetrics()&&null===this.timings.initTime&&null!==this.beginInit){var e=performance.now();this.timings.initTime=e-this.beginInit}},J.prototype.startRecordingPush=function(){this.canRetrieveMetrics()&&(this.beginPush=performance.now())},J.prototype.stopRecordingPush=function(){if(this.canRetrieveMetrics()&&null===this.timings.pushTime&&null!==this.beginPush&&null!==this.timings.initTime){var e=performance.now();this.timings.pushTime=e-this.beginPush}},J.prototype.getPerformanceOrDegradedNow=function(){return this.canRetrieveMetrics()?performance.now():(new Date).getTime()},J);function J(){this.timings={initTime:null,pushTime:null},this.beginInit=null,this.beginPush=null,this.hasPerformanceApi=void 0!==window.performance&&"function"==typeof window.performance.now}var z=(Y.prototype.trySetPageId=function(e,t){this.isCbsEnabled&&this.checkNotExistOrEmpty(e.page_id)&&(e.page_id=t)},Y.prototype.tryForceViewListPageId=function(e){this.isCbsEnabled&&this.checkNotExistOrEmpty(e.page_id)&&(this.checkNotExistOrEmpty(e.category)?this.checkNotExistOrEmpty(e.keywords)?e.page_id="viewList":e.page_id="viewSearchResult":e.page_id="viewCategory")},Y.prototype.tryRunActionAfterAdBlockDetectionOrImmediate=function(e,t){var n=this,o=window.criteo_q;if(null!=o){var i=o.adBlockDetector;this.isCbsEnabled&&void 0!==i?(i((function(t){n.abe=t,e()})),t(e)):e()}else e()},Y.prototype.tryAppendAdBlockerParameter=function(e){void 0!==this.abe&&e.push("abe="+(this.abe?1:0))},Y.prototype.tryAppendUatParameter=function(e){if(this.isCbsEnabled&&void 0!==this.uat){var t=encodeURIComponent||escape;e.push("uat="+t(this.uat))}},Y.prototype.clean=function(){this.abe=void 0,this.isCbsEnabled=!1,this.uat=void 0},Y.prototype.enable=function(){this.isCbsEnabled=!0},Y.prototype.setUat=function(e){this.uat=e},Y.prototype.checkNotExistOrEmpty=function(e){return void 0===e||""===e},Y);function Y(){this.abe=void 0,this.isCbsEnabled=!1,this.uat=void 0}var X=/^#(enable|disable)-criteo-tag-debug-mode(=(\d+))?$/;function Q(e,t,n,r,a){if(function(){if(document&&window.location.hash){var e=X.exec(window.location.hash);if(e&&4===e.length){var t="enable"===e[1],n=Number(e[3]);new i("criteoTagDebugMode",t?864e5:0).setValueWithNoDomain(t&&n&&!isNaN(n)?String(n):"0"),window.location.href=window.location.href.substr(0,window.location.href.indexOf("#"))}}}(),!document||"function"!=typeof Array.prototype.indexOf||-1===document.cookie.indexOf("criteoTagDebugMode="))return e;var c=function(e,t,n,o,i){var r={exceptions:e.exceptions,m_config:n,m_state:o,originalPush:e.push,performances:e.performances,push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<e.length&&this.stagedPushes.push(e),i.stopRecordingInit()},pushError:function(e){this.stagedPushes.push(e)},removeLater:e.removeLater,setProtectedTimeout:t.setProtectedTimeout,stagedErrors:[],stagedPushes:[]};return window.onerror=function(e){return function(t,n,o,i){var a={column:i,lineNumber:o,message:t,url:n};return r.pushError(a),!(!e||"function"!=typeof e)&&e.apply(window,[t,n,o,i])}}(window.onerror),r}(e,t,n,r,a);return function(){if(document){var e="ld-tag-debug."+o+".js",t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",document.location.protocol+"//static.criteo.net/js/ld/"+e);var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}}(),c}var Z=(K.prototype.isChrome=function(){return!!window.chrome},K.prototype.addTrialToken=function(e){var t=document.createElement("meta");t.httpEquiv="origin-trial",t.content=e,document.head.appendChild(t)},K.prototype.registerTrigger=function(e){if(this.isFeatureAllowed("attribution-reporting")){var t=document.createElement("img");t.setAttribute("style","display:none;"),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("attributionsrc",K.ATTRIBUTION_TRIGGER_URL_PREFIX+"?"+e);var n=document.getElementsByTagName("script")[0];t.setAttribute("data-owner","criteo-tag"),n.parentNode.insertBefore(t,n),F.removeLater(this.exceptionHandler,t)}},K.prototype.isFeatureAllowed=function(e){return!(!document.featurePolicy||!document.featurePolicy.features())&&document.featurePolicy.features().some((function(t){return t===e}))},K.CRITEO_NET_TOKEN="A15LsJSPgMV7w0Kc5TYHyc1UNzggyebBmE3sj4JP9UJSUVJgucSFQRyN470L3hnsTddsFRSgM695VmLGwBiFngwAAACAeyJvcmlnaW4iOiJodHRwczovL2NyaXRlby5uZXQ6NDQzIiwiZmVhdHVyZSI6IlByaXZhY3lTYW5kYm94QWRzQVBJcyIsImV4cGlyeSI6MTY5NTE2Nzk5OSwiaXNTdWJkb21haW4iOnRydWUsImlzVGhpcmRQYXJ0eSI6dHJ1ZX0=",K.CRITEO_COM_TOKEN="AwnOWg2dzaxHPelVjqOT/Y02cSxnG2FkjXO7DlX9VZF0eyD0In8IIJ9fbDFZGXvxNvn6HaF51qFHycDGLOkj1AUAAACAeyJvcmlnaW4iOiJodHRwczovL2NyaXRlby5jb206NDQzIiwiZmVhdHVyZSI6IlByaXZhY3lTYW5kYm94QWRzQVBJcyIsImV4cGlyeSI6MTY5NTE2Nzk5OSwiaXNTdWJkb21haW4iOnRydWUsImlzVGhpcmRQYXJ0eSI6dHJ1ZX0=",K.ATTRIBUTION_TRIGGER_URL_PREFIX="https://measurement-api.criteo.com/conversiontracking",K);function K(e,t){this.document=e,this.exceptionHandler=t,this.isChrome()&&(this.addTrialToken(K.CRITEO_NET_TOKEN),this.addTrialToken(K.CRITEO_COM_TOKEN))}var $,ee=(te.generateUUID=function(){for(var e="",t=0;t<36;t++)e+=8===t||13===t||18===t||23===t?"-":14===t?"4":19===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(16*Math.random()).toString(16);return e},te);function te(){}function ne(e,t,n,o,i){if(e&&0!==(e=e.trim()).length){var r=encodeURIComponent||escape,a=r(e);n<a.length&&(t.push(i+"="+a.length),a=a.substr(0,n));var c=r(a);t.push(o+"="+c)}}if(!window.criteo_q||window.criteo_q instanceof Array){var oe=window.criteo_q||[];window.criteo_q=function(){var n;void 0!==(null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.hash)&&-1!==window.location.hash.indexOf("onetag-debug")&&b.setLogLevel(v.Debug);var r=new S,a=new H;a.startRecordingInit();var c={app:{accounts:[],actions:[],bodyReady:!1,disingScheduled:[],domReady:!1,eventSent:!1,queue:[]},cbs:new z},s=function(){var n={account:e("partnerId")||null,firstPartyIdentifier:e("fpIdentifier")||null,customerInfo:[],extraData:[],handlerParams:{v:o},handlerResponseType:"single",handlerUrlPrefix:"https://sslwidget.criteo.com/event",partnerPayload:null,requestType:"pixel",responseType:"js",tagVersion:o,dynamic:e("dynamic")||null,fullUrlMaxLength:e("fullUrlMaxLength",2e3),previousUrlMaxLength:e("previousUrlMaxLength",400),privateModeDetectionEnabled:e("privateModeDetectionEnabled",!0)},i={item:!0,"item.id":!0,product:!0,"product.id":!0},r={item:!0,product:!0};return{hooks:{},shortNameMap:{events:{applaunched:"al",viewitem:"vp",viewhome:"vh",viewlist:"vl",viewbasket:"vb",viewsearch:"vs",viewpage:"vpg",tracktransaction:"vc",addtocart:"ac",calldising:"dis",setdata:"exd",setemail:"ce",setidentity:"id"},properties:{event:"e",account:"a",first_party_identifier:"fpid",currency:"c",product:"p",item:"p","item.id":"i","item.price":"pr","item.quantity":"q","item.availability":"pav","item.buy_box":"bb","item.sku_parent":"psp","item.store_id":"ps",item_whitelist:"iw","product.id":"i","product.price":"pr","product.quantity":"q","product.availability":"pav","product.buy_box":"bb","product.sku_parent":"psp","product.store_id":"ps",data:"d",keywords:"kw",checkin_date:"din",checkout_date:"dout",deduplication:"dd",delivery:"dl",attribution:"at","attribution.channel":"ac","attribution.value":"v",user_segment:"si",new_customer:"nc",customer_id:"ci",email:"m",hash_method:"h",identity:"id",raw_identity:"rid",transaction_value:"tv",client_revenue:"cr",responseType:"rt",page_name:"pn",page_id:"pi",page_number:"pnb",category:"ca",filters:"f","filters.name":"fn","filters.operator":"fo","filters.value":"fv",retailer_visitor_id:"rvi",price:"pr",availability:"av",sub_event_type:"se",store_id:"s",item_group_id:"sp",sku_parent:"sp",zipcode:"z",nocall:"noc",block:"bl"}},trackingCallData:n,workflow:{container:null,disOnce:!1,manualDising:!1,manualFlush:!1,noPartialFlush:!1,partialDis:!1},encodingConfig:{shouldEncodeField:function(e){return i[e]}},parsingConfig:{shouldParseField:function(e){return r[e]}},identifierScrappingConfig:{externalIdentifiersToRead:{FirstId:{key:"firstid",storageSource:t.Cookie},IntimateMergerId:{key:/^_im_uid\./,storageSource:t.LocalStorage}}}}}(),u=function(e){var t=window.navigator.userAgent.match(q),n=null!==t;return{hasItp:null!==t&&11<=parseFloat(t[1]),isSafari:n}}(),l=new V(r,u,window,s),d=new G(u),p=new P(window),f=new Z(document,r),h=function(e){var t=!1,n=void 0,o=[];return function(i){t?i(n):(o.push(i),1===o.length&&e((function(e){t=!0,n=e;for(var i=0,r=o;i<r.length;i++)(0,r[i])(n)})))}}(p.retrieveConsent.bind(p));function g(e,t,n,o,i,r,a,c,s,u,l){e.waitingForSyncframe&&(e.waitingForSyncframe=!1,y(e,t,n,o,i,r,a,c,s,u,l))}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.catchAndStoreException((function(){a.startRecordingPush();for(var t=0,n=e;t<n.length;t++){var o=n[t];c.app.queue.push(o)}y(d,c.app,c.cbs,l,s.shortNameMap,s.encodingConfig,s.parsingConfig,s.trackingCallData,s.hooks,s.workflow,s.identifierScrappingConfig),function(e,t){!function(e){var t=!1;if(200<e.length)t=!0;else for(var n=0,o=e;n<o.length;n++){var i=o[n],r=0;if(Object.keys)r=Object.keys(i).length;else for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r+=1);if(200<r){t=!0;break}}t&&(e.length=0)}(e.extraData),e.customerInfo=[],t.clean()}(s.trackingCallData,c.cbs),a.stopRecordingPush()}),e),a.stopRecordingInit()}function y(e,t,n,o,i,r,a,c,s,u,l){for(var d=[],p=t.queue,f=0;f<p.length;++f){var h=p[f];if(h instanceof Array){var g=[f+1,0];p.splice.apply(p,g.concat(h))}if(h instanceof Function)p.splice(f+1,0,h());else if(h&&"[object Object]"===h.toString())switch(I(t,n,o,i,r,a,c,s,u,l,h,f,p,d)){case 0:d.push(h);break;case-1:d=d.concat(p.slice(f)),f=p.length}}s.afterEval instanceof Function&&s.afterEval(),t.queue=d||[],u.manualFlush||u.noPartialFlush&&0!==t.queue.length||e.waitingForSyncframe||D(t,n,o,i,r,a,c,s,u,l,0!==t.queue.length)}function C(e,t,n){n.hasOwnProperty("account")||(n.account=t.accounts);var o=e.handlerResponseType;n.hasOwnProperty("type")&&(o=n.type,delete n.type),_(n.account,t.disingScheduled),"sequential"===o&&(n.dc=!0)}function w(e,t,n,o){var i=T(e,o);return null!==i?i:k(e,t,n,o)}function k(e,t,n,o){if(!e.bodyReady||t.container&&document.body.contains(t.container)||(t.container=F.appendCriteoContainer(document.body)),o.url){var i=void 0;o.isImgUrl?((i=document.createElement("img")).setAttribute("style","display:none;"),i.setAttribute("width","1"),i.setAttribute("height","1")):((i=document.createElement("script")).setAttribute("async","true"),i.setAttribute("type","text/javascript")),i.setAttribute("src",o.url),o.element=i}if(n.beforeAppend instanceof Function&&(o.element=n.beforeAppend(o.element)),M(o),o.element&&(o.element.tagName||o.isImgUrl))if(t.container||"script"!==o.element.tagName.toLowerCase()&&!o.isImgUrl){if(!t.container)return 0;t.container.appendChild(o.element),F.removeLater(r,o.element)}else{var a=document.getElementsByTagName("script")[0];o.element.setAttribute("data-owner","criteo-tag"),a.parentNode.insertBefore(o.element,a),F.removeLater(r,o.element)}return 1}function T(e,t){return!e.domReady&&t.requiresDOM&&"no"!==t.requiresDOM?"blocking"===t.requiresDOM?-1:0:(delete t.requiresDOM,t.event?(t.account&&_(t.account,e.accounts),t.event=t.event.toLowerCase(),null):(M(t),1))}function I(e,t,n,o,i,r,a,u,p,f,h,g,m,v){var y=h.event,w=T(e,h);if(null!==w)return w;switch(h.event){case"setdata":return W(a.extraData,e.actions,h);case"setparameter":for(var b in h)"event"!==b.toLowerCase()&&h.hasOwnProperty(b)&&(a.handlerParams[b]=h[b]);return 1;case"calldising":C(a,e,h);break;case"setzipcode":case"setstore":return h.event="setdata",W(a.extraData,e.actions,h);case"setcustomerid":return h.event="setdata",h.customer_id=h.id,delete h.id,W(a.extraData,e.actions,h);case"setretailervisitorid":return t.enable(),h.event="setdata",h.retailer_visitor_id=h.id,delete h.id,W(a.extraData,e.actions,h);case"setgoogleadvertisingid":return n.gaid=h.gaid,W(a.extraData,e.actions,{event:"setdata",site_type:"aa"});case"setappleadvertisingid":return n.idfa=h.idfa,W(a.extraData,e.actions,{event:"setdata",site_type:"aios"});case"setemail":case"sethashedemail":case"ceh":h.event="setemail",h.hasOwnProperty("email")&&(h.email instanceof Array||(h.email=[h.email]),h.email=A(h.email));var P=M(h);return a.customerInfo.push(P),N(e.actions,M(h)),1;case"setidentity":if(h.hasOwnProperty("identity")){var S=h.identity instanceof Array?h.identity:[h.identity];if(0<(S=A(S)).length)return h.identity=S,e.actions.push(M(h)),1}return 0;case"setsitetype":var I="d";return"aios"!==h.type&&"aa"!=h.type||(I=h.type),"mobile"!==h.type&&"m"!==h.type||(I="m"),"tablet"!==h.type&&"t"!==h.type||(I="t"),h.event="setdata",delete h.type,h.site_type=I,W(a.extraData,e.actions,h);case"appendtag":return k(e,p,u,h);case"gettagstate":return h.callback instanceof Function?h.callback(c,s,l,d):1;case"setuat":return t.setUat(h.uat),1;case"viewsearchresult":case"viewcategory":t.trySetPageId(h,y),h.event="viewlist";break;case"viewlist":t.tryForceViewListPageId(h);break;case"viewitem":case"viewhome":case"viewbasket":case"tracktransaction":case"addtocart":t.trySetPageId(h,y);break;case"viewstore":t.trySetPageId(h,y),h.event="viewHome",h.sub_event_type="s";break;case"checkavailability":t.trySetPageId(h,y),h.event="viewBasket",h.sub_event_type="a";break;case"reserveinstore":t.trySetPageId(h,y),h.event="viewBasket",h.sub_event_type="r";break;case"flush":case"flushevents":return D(e,t,n,o,i,r,a,u,p,f,g!==m.length-1||0!==v.length),1;case"setaccount":return a.account=h.account,1;case"seturl":return a.handlerUrlPrefix=h.url,1;case"setcalltype":return a.handlerResponseType=h.type,1;case"setresponsetype":return a.responseType=h.type,1;case"setrequesttype":return a.requestType=h.type,1;case"setpartnerpayload":return a.partnerPayload=h.payload,1;case"oninitialized":return u.onInitialized=h.callback,1;case"ondomready":return u.onDOMReady=h.callback,1;case"beforeappend":return u.beforeAppend=h.callback,1;case"aftereval":return u.afterEval=h.callback,1;case"onflush":return u.onFlush=h.callback,1;case"onurlgenerated":return u.onUrlGenerated=h.callback,1;case"disonce":return p.disOnce=!0,1;case"manualdising":return p.manualDising=!0,1;case"manualflush":return p.manualFlush=!0,1;case"nopartialflush":return p.noPartialFlush=!0,1;case"disonpartialflush":return p.partialDis=!0,1}return e.actions.push(M(h)),1}function D(e,t,n,o,a,c,s,u,l,d,p){if(u.onFlush instanceof Function&&(u.onFlush(),b.warn("on flush hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")),0!==e.actions.length){for(var g=0,m=s.extraData;g<m.length;g++){var v=m[g];x(e.actions,v)}for(var y=0,k=s.customerInfo;y<k.length;y++){var P=k[y];N(e.actions,P)}for(var S=0,I=e.actions;S<I.length;S++)U(I[S]);if(!l.manualDising&&(!p||l.partialDis)){for(var _=[],D=0,A=e.accounts;D<A.length;D++){var W=A[D];R(e.disingScheduled,W)||_.push(W)}0<_.length&&function(e,t,n){null!==T(t,n)||(C(e,t,n),t.actions.push(M(n)))}(s,e,{event:"callDising",account:_})}var L=!1,V=function(e,t,n,o,r,a,c,s){var u=e.actions,l=[];if(1===e.accounts.length&&(r.account=e.accounts[0]),null!==r.account&&l.push("a="+O(o,a,c,r.account,[])),"js"!==r.responseType&&l.push("rt="+O(o,a,c,r.responseType,[])),r.handlerParams){var d=decodeURIComponent(O(o,a,c,r.handlerParams,[]));d&&l.push(d)}var p=function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t],o=n.nonce||n.getAttribute("nonce");if(null!=o&&""!==o)return o}}();if(void 0!==p){var f=encodeURIComponent||escape;l.push("csp-nonce="+f(p))}t.tryAppendUatParameter(l);for(var h=0;h<u.length;++h){var g=u[h];g.account&&E(null===r.account?void 0:r.account,null===g.account?void 0:g.account)&&delete g.account,l.push("p"+h+"="+O(o,a,c,g,[]))}n.fillQueryStringParams(l,r),null!==r.partnerPayload&&l.push("pp="+O(o,a,c,r.partnerPayload,[])),r.dynamic&&l.push("dy=1"),ne(F.getHighestAccessibleUrl(window),l,r.fullUrlMaxLength,"fu","ful"),ne(F.getPreviousUrl(window),l,r.previousUrlMaxLength,"pu","pul"),l.push("ceid="+ee.generateUUID()),l.push("dtycbr="+Math.floor(1e5*Math.random()));var m=function(e){return Object.keys(e.externalIdentifiersToRead).map((function(t){var n=e.externalIdentifiersToRead[t],o=new i(n.key,0,n.storageSource).getFromAllStorages().value;return null!=o&&0<o.length?JSON.stringify({type:t,value:o}):""})).filter((function(e){return 0<e.length})).join(",")}(s);return 0<m.length&&l.push("external_advids="+encodeURIComponent("["+m+"]")),l}(e,t,n,o,s,a,c,d);e.actions=[];var B=function(){if(!L){L=!0,t.tryAppendAdBlockerParameter(V);var n=function(e){return e.join("&")}(V),o=function(e,t){return{event:"appendTag",isImgUrl:"gif"===e.responseType,url:e.handlerUrlPrefix+"?"+t}}(s,n);"function"==typeof u.onUrlGenerated?u.onUrlGenerated(o.url):"beacon"===s.requestType&&navigator.sendBeacon?navigator.sendBeacon(o.url):w(e,l,u,o),b.info("DIS call triggered",o.url,V),e.eventSent=!0,f.registerTrigger(n),l.disOnce||(e.disingScheduled=[])}};h((function(e){V.push.apply(V,function(e){var t=[],n=e.gdprConsent;n&&(void 0!==n.gdprApplies&&t.push("gra="+(n.gdprApplies?1:0)),void 0!==n.consentData&&t.push("grs="+n.consentData),void 0!==n.version&&t.push("grv="+n.version));var o=e.ccpaConsent;return o&&(void 0!==o.uspString&&t.push("cs="+o.uspString),void 0!==o.version&&t.push("cv="+o.version)),t}(e)),t.tryRunActionAfterAdBlockDetectionOrImmediate(B,(function(e){return r.setProtectedTimeout(e,500)}))}))}}function O(e,t,n,o,i){var r,a,c,s=encodeURIComponent||escape,u="";if(o instanceof Function)u=O(e,t,n,o(),i);else if(o instanceof Array){for(var l=[],d=0;d<o.length;++d)l[d]=O(e,t,n,o[d],i);u+="["+l.join(",")+"]"}else if(o&&"[object Object]"===o.toString()){var p=[];for(var f in o)if(o.hasOwnProperty(f)){var h=i.concat([f]);p.push((r=e,a=f,c=h.join("."),(r.properties[c]?r.properties[c]:a)+"="+O(e,t,n,o[f],h)))}u+=p.join("&")}else if(1===i.length&&"event"===i[0])u+=e.events[o.toLowerCase()]?e.events[o.toLowerCase()]:o;else{var g=function(e,t,n){var o=t.join(".");return"string"==typeof n&&e.shouldParseField(o)&&0!=n.length&&"["==n.charAt(0)&&"]"==n.charAt(n.length-1)?n.substring(1,n.length-1).split(",",-1).map((function(e){return e.trim()})):[]}(n,i,o);if(0<g.length)return O(e,t,n,g,i);!function(e,t){var n=t.join(".");return e.shouldEncodeField(n)}(t,i)?u+=o:u+=s(o)}return s(u)}return r.catchAndStoreException((function(){return l.checkAcid(),l.checkClientSideIdentityStatus(),l.setCop(window),function(e,t,n,o,i,a,c,s,u,l,d){e.setWaitingFlag(o),e.waitingForSyncframe&&r.setProtectedTimeout((function(){g(e,t,n,o,i,a,c,s,u,l,d)}),1e4)}(d,c.app,c.cbs,l,s.shortNameMap,s.encodingConfig,s.parsingConfig,s.trackingCallData,s.hooks,s.workflow,s.identifierScrappingConfig),F.onBodyReady(r,(function(){s.hooks.onInitialized instanceof Function?(c.app.bodyReady=s.hooks.onInitialized(),b.warn("onInitialized hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):c.app.bodyReady=!0,h((function(e){!function(e,t,n,o,i,a,c,s,u,l,d,p){if(e.shouldInjectSyncframe()){var f=e.createIframe(o,s.tagVersion,r,s.privateModeDetectionEnabled,p);window.addEventListener&&(r.addProtectedEventListener(window,"message",(function(r){!function(e,t,n,o,i,r,a,c,s,u,l,d){var p=d.data;(p&&d.origin==e.gumSyncFrameOrigin||window.BypassSyncframeMessageSanityCheck)&&(d.stopPropagation(),o.checkCookies(p),e.waitingForSyncframe&&g(e,t,n,o,i,r,a,c,s,u,l))}(e,t,n,o,i,a,c,s,u,l,d,r)}),!0),w(t,l,u,{event:"appendtag",element:f}))}}(d,c.app,c.cbs,l,s.shortNameMap,s.encodingConfig,s.parsingConfig,s.trackingCallData,s.hooks,s.workflow,s.identifierScrappingConfig,e)})),y(d,c.app,c.cbs,l,s.shortNameMap,s.encodingConfig,s.parsingConfig,s.trackingCallData,s.hooks,s.workflow,s.identifierScrappingConfig)})),F.onDocumentReady(r,(function(){s.hooks.onDOMReady instanceof Function?(c.app.domReady=s.hooks.onDOMReady(),b.warn("on DOM ready hook is deprecated and will soon be removed. Please do not use it and contact criteo if you think this may break your integration")):c.app.domReady=!0,y(d,c.app,c.cbs,l,s.shortNameMap,s.encodingConfig,s.parsingConfig,s.trackingCallData,s.hooks,s.workflow,s.identifierScrappingConfig)})),function(e){try{var t=F.getAnchorWithReferrer(document);t&&t.hostname!==document.location.hostname&&L(e,{event:"setData",ref:t.protocol+"//"+t.hostname})}catch(e){}}(s.trackingCallData.extraData),e("visitEventEnabled",!1)&&function(t,n){function o(){n.eventSent||(t({event:"setRequestType",type:"beacon"}),t({event:"viewPage"}))}window.addEventListener&&window.addEventListener("pagehide",o);var i=e("visitEventDelay",3e4);0<=i&&setTimeout(o,i)}(m,c.app),Q({exceptions:r.exceptions,performances:a.timings,push:m,removeLater:function(e){return F.removeLater(r,e)}},r,s,c,a)}))}(),oe.adBlockDetector,window.criteo_q.adBlockDetector=oe.adBlockDetector,($=window.criteo_q).push.apply($,oe)}}();